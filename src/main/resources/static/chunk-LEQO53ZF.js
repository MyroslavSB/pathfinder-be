import{a as I}from"./chunk-QBWCAETO.js";import{c as E,d as k}from"./chunk-5UV6QQHW.js";import{a as T}from"./chunk-FGVEOLCQ.js";import{b as l,d as w,f as O,h as N,i as R,k as V}from"./chunk-ZKJLGRTU.js";import{a as A}from"./chunk-DBFY6N4R.js";import"./chunk-BUMFG4TH.js";import{a as M}from"./chunk-YAG5TTVO.js";import{$a as n,Ja as b,Na as y,Pb as F,Y as d,Za as s,_a as t,ab as f,ba as g,ca as u,eb as C,fb as h,ga as S,gb as v,ib as _,kb as m,rb as x,sb as o,tb as P,za as i}from"./chunk-PZ3LDO2P.js";function D(r,p){if(r&1){let e=v();C(0),t(1,"div",7),f(2,"pathfinder-input",8),n(),t(3,"div",7),f(4,"pathfinder-input",9),n(),t(5,"div",10)(6,"pathfinder-button",11),_("onClick",function(){g(e);let c=m();return u(c.nextStep())}),n()(),h()}if(r&2){let e=m();i(2),s("control",e.getControl(e.registrationForm,"firstName")),i(2),s("control",e.getControl(e.registrationForm,"lastName"))}}function L(r,p){if(r&1){let e=v();C(0),t(1,"div",7),f(2,"pathfinder-input",12),n(),t(3,"div",7),f(4,"pathfinder-input",13),n(),t(5,"div",10)(6,"pathfinder-button",14),_("onClick",function(){g(e);let c=m();return u(c.prevStep())}),n(),t(7,"pathfinder-button",15),_("onClick",function(){g(e);let c=m();return u(c.onSubmit())}),n()(),h()}if(r&2){let e=m();i(2),s("control",e.getControl(e.registrationForm,"email")),i(2),s("control",e.getControl(e.registrationForm,"password"))}}function q(r,p){if(r&1){let e=v();C(0),t(1,"div",16)(2,"h3"),o(3,"Verify your email \u{1F4E7}"),n(),t(4,"p"),o(5," We\u2019ve sent a verification email to "),t(6,"strong"),o(7),n(),o(8,". "),n(),t(9,"p"),o(10," Please verify your email address to activate your account. You won\u2019t be able to log in until verification is complete. "),n(),t(11,"div",10)(12,"pathfinder-button",17),_("onClick",function(){g(e);let c=m();return u(c.goToGmail())}),n()()(),h()}if(r&2){let e=m();i(7),P(e.registeredEmail)}}var G=class r{registrationForm;currentStep=1;registeredEmail="";fb=d(R);authService=d(I);router=d(E);destroyRef=d(S);ngOnInit(){this.registrationForm=this.fb.group({firstName:["",[l.required,l.pattern(/^[A-Za-zÀ-ÖØ-öø-ÿ]+([ '-][A-Za-zÀ-ÖØ-öø-ÿ]+)*$/)]],lastName:["",[l.required,l.pattern(/^[A-Za-zÀ-ÖØ-öø-ÿ]+([ '-][A-Za-zÀ-ÖØ-öø-ÿ]+)*$/)]],email:["",[l.required,l.email]],password:["",[l.required,l.minLength(6)]]})}nextStep(){this.isStepOneValid()?this.currentStep=2:this.markStepOneTouched()}prevStep(){this.currentStep=1}isStepOneValid(){return this.getControl(this.registrationForm,"firstName").valid&&this.getControl(this.registrationForm,"lastName").valid}markStepOneTouched(){this.getControl(this.registrationForm,"firstName").markAsTouched(),this.getControl(this.registrationForm,"lastName").markAsTouched()}onSubmit(){if(this.registrationForm.invalid){this.registrationForm.markAllAsTouched();return}this.authService.register(this.registrationForm.value).pipe(A(this.destroyRef)).subscribe(()=>{this.registeredEmail=this.registrationForm.value.email,this.currentStep=3})}getControl(p,e){return p?.get(e)}goToGmail(){window.open("https://mail.google.com","_blank")}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=b({type:r,selectors:[["app-registration-page"]],decls:17,vars:8,consts:[[1,"login-wrapper"],[1,"center-box"],[1,"step-indicator"],[1,"form-container",3,"formGroup"],[4,"ngIf"],[1,"link-text"],["routerLink","/login"],[1,"form-field-container"],["label","First Name","type","text",3,"control"],["label","Last Name","type","text",3,"control"],[1,"submit-container"],["text","Next",3,"onClick"],["label","Email","type","email",3,"control"],["label","Password","type","password",3,"control"],["text","Back",3,"onClick"],["text","Register",3,"onClick"],[1,"success-container"],["text","Open Gmail",3,"onClick"]],template:function(e,a){e&1&&(t(0,"div",0)(1,"div",1)(2,"h2"),o(3,"Create account"),n(),t(4,"div",2)(5,"span"),o(6,"1"),n(),t(7,"span"),o(8,"2"),n()(),t(9,"form",3),y(10,D,7,2,"ng-container",4)(11,L,8,2,"ng-container",4)(12,q,13,1,"ng-container",4),n(),t(13,"div",5),o(14," Already have an account? "),t(15,"a",6),o(16,"Login"),n()()()()),e&2&&(i(5),x("active",a.currentStep===1),i(2),x("active",a.currentStep===2),i(2),s("formGroup",a.registrationForm),i(),s("ngIf",a.currentStep===1),i(),s("ngIf",a.currentStep===2),i(),s("ngIf",a.currentStep===3))},dependencies:[M,T,V,O,w,N,k,F],styles:[".step-indicator[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:12px;margin-bottom:24px}.step-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;border:2px solid #aaa;display:flex;align-items:center;justify-content:center;font-weight:700;color:#aaa}.step-indicator[_ngcontent-%COMP%]   span.active[_ngcontent-%COMP%]{border-color:#3b7bff;color:#3b7bff}.submit-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-row-gap:16px}.success-container[_ngcontent-%COMP%]{text-align:center}.success-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:16px;color:#3b7bff}.success-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:12px;color:#666}"]})};export{G as RegistrationPageComponent};
